# «Останній раз онлайн» — дизайн-нарис

## Фокус проєкту
- **Формат:** мобільна чат-новела в дусі Seen, де історія подається через мессенджер.
- **Тон:** трилер з елементами недовіри й шпигунської напруги. Гравець — Алекс, що шукає Оріона.
- **Головна механіка:** читання повідомлень, вибір відповідей, управління довірою та часом, відслідковування доказів.

## Ключові системи
1. **Чат-полотно**
   - Бульбашки повідомлень з плавним fadeIn.
   - Системні події (`typing`, `deleted`, `status`, `addContact`, `timer`).
   - Індикатор набору, блок вибору, мінімальні анімації (`fadeIn`, `pulse`, `deleteFlash`).
2. **Сайдбар стану**
   - Треки довіри для Міри, Оріона, Сема та Еви.
   - Флаги прогресу (`hasKey`, `seenDeleted`, тощо).
   - Лічильники часу і зібраних доказів.
   - Поточний ідентифікатор сцени.
3. **SFX та хаптика**
   - Процедурні тони через Web Audio API (`message_in`, `timer_*`, `choice_show`, `checkpoint`).
   - `navigator.vibrate` для підтримуваних пристроїв.
4. **I18n**
   - Українська та російська локалізації з однаковими ключами.
   - Вибір мови на заставці.
5. **Схема даних**
   - JSON-сцени відповідають обмеженій схемі (`docs/codex/schema-min.json`).
   - Перевірка через `npm run validate:scenes`.

## Карта прогресу глав
- **Глава 1** — знайомство з Семом, навчання, додавання Міри.
- **Глава 2** — конфронтація з Оріоном, вибір «вичекати» чи «тиснути».
- **Глава 3** — розмова з Мірою, підготовка до головоломки.
- **Глава 4** — `timestamps`-мінігра (ще попереду, наразі в архіві).
- **Глави 5–10** — розвиток розслідування, кульмінація та фінал (збережено в архіві як референс).

## Взаємодія з Codex
- Промпти лежать у `docs/codex/`. Головне правило — жодного «вільного тексту» у JSON.
- Для генерації нових глав орієнтуйтеся на приклади з `fewshot_ch1_ch2.json` і вимоги в `user_prompts.md`.
- Після генерації обновіть переклади та прогоніть AJV-перевірку.

## Наступні кроки
- Оновити / розширити архівні глави 4–10 та поступово перенести їх у активний сценарій.
- Додати міні-гру та таймери для пізніших глав.
- Впровадити збереження прогресу гравця (локальне сховище).
